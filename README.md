# Honma-Munehisa
혼마 무네히사의 기법을 파이썬으로 
![honma](https://github.com/moon8997/Honma-Munehisa/assets/67020351/bd2c253d-a989-4e28-849c-25d744b6def7)

# 프로젝트 설명
이 프로젝트는 주식 거래량을 모니터링하고 특정 캔들 패턴(망치형, 장악형, 관통형)을 탐지하여 Telegram 봇을 통해 알림을 제공하는 기능을 구현한 것입니다. yfinance와 BeautifulSoup을 사용하여 데이터를 수집하고, APScheduler를 사용하여 비동기 작업을 스케줄링합니다.

# 주요 라이브러리 및 모듈
**telegram**: Telegram 봇과 상호작용하기 위해 사용.

**yfinance**: Yahoo Finance에서 주식 데이터를 가져오기 위해 사용.

**requests 및 BeautifulSoup**: 웹 스크래핑을 통해 웹페이지에서 데이터를 추출하기 위해 사용.

**pandas**: 데이터 처리를 위해 사용.

**APScheduler**: 비동기 작업 스케줄링을 위해 사용.

**asyncio**: 비동기 프로그래밍을 위해 사용.


# 주요 함수 및 로직 설명


### Telegram 봇 핸들러 함수
  
**number_command**: 사용자가 /1 또는 /2 명령어를 입력했을 때 실행됩니다. /1은 거래량 상위 50개 주식, /2는 우량주 상위 50개 주식을 검색합니다.

**start_volume_tracking**: 주식 심볼을 입력받아 거래량을 모니터링하기 시작합니다. 이때, 최대 거래량을 추적하고, 스케줄러를 통해 주기적으로 거래량을 확인합니다.

**fetch_and_send_volume**: 주기적으로 주식의 거래량을 확인하여, 특정 조건을 만족하면 Telegram으로 알림을 보냅니다.

**stop_job**: 특정 주식 심볼에 대한 모니터링 작업을 중지합니다.

**stop_all_jobs**: 모든 모니터링 작업을 중지합니다.

**monitor_command**: 사용자가 /monitor <symbol> 명령어를 입력했을 때 실행되며, 특정 주식 심볼에 대한 거래량 모니터링을 시작합니다.



### 주식 데이터 분석 함수
  
**calculate_sma**: 단순 이동 평균(SMA)을 계산합니다.

**is_downtrend**: 단기 이동 평균이 장기 이동 평균보다 낮은지를 확인하여 하락 추세인지 판단합니다.

**is_hammer**: 망치형 캔들 패턴을 탐지합니다.

**is_engulfing**: 장악형 캔들 패턴을 탐지합니다.

**is_piercing_line**: 관통형 캔들 패턴을 탐지합니다.



### 웹 스크래핑 및 데이터 처리 함수
  
**fin**: 거래량 상위 50개 주식 또는 우량주 상위 50개 주식의 심볼을 웹 스크래핑으로 가져오고, 해당 주식에 대한 캔들 패턴을 분석하여 결과를 반환합니다.

# 코드 실행
main 함수에서 Telegram 봇을 시작하고, 명령어 핸들러를 등록합니다.

사용자는 Telegram 봇을 통해 명령어를 입력하여 주식 데이터를 조회하거나, 특정 주식의 거래량 모니터링을 시작/중지할 수 있습니다.

비동기 작업을 통해 주기적으로 주식 데이터를 확인하고, 조건을 만족하는 경우 Telegram을 통해 알림을 보냅니다.


# 코드의 흐름
사용자가 Telegram 봇을 통해 명령어를 입력합니다.

봇 핸들러가 명령어를 처리하고, 필요한 데이터를 수집하거나 모니터링 작업을 시작합니다.

APScheduler가 주기적으로 주식 데이터를 확인하고, 특정 조건을 만족하는 경우 Telegram을 통해 사용자에게 알림을 보냅니다.

